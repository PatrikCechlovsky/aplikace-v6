/* app/styles/components/DetailAttachments.css */
/* =========================================
   DETAIL ATTACHMENTS – manager + historie
   CÍL:
   - Manager layout je flex sloupec s pevnou výškou (ne scroll celé stránky)
   - Horní tabulka příloh je větší (flex:1)
   - Spodní panel historie je dole (flex:0) a kompaktní
   - Scroll má jen ListView (.listview__table-wrapper), ne wrappery
   ========================================= */

/* =============================
   Cells + Links
   ============================= */

.detail-attachments__cell-title {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  font-weight: 400;
  white-space: nowrap;
}

.detail-attachments__muted {
  color: var(--color-text-muted);
}

.detail-attachments__link {
  background: none;
  border: 0;
  padding: 0;
  color: var(--color-link, var(--color-text));
  cursor: pointer;
  text-decoration: none;
  max-width: 100%;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.detail-attachments__link:hover {
  text-decoration: underline;
}

.detail-attachments__link:disabled {
  cursor: default;
  opacity: 0.6;
  text-decoration: none;
}

.detail-attachments__badge {
  display: inline-flex;
  align-items: center;
  height: 22px;
  padding: 0 10px;
  border-radius: 999px;
  border: 1px solid var(--color-border);
  color: var(--color-text-muted);
  background: var(--color-surface-subtle);
  white-space: nowrap;
}

/* Placeholder v historii (sjednocená typografie) */
.detail-attachments__history-placeholder {
  padding: 10px 12px;
  color: var(--color-text-muted);
  font-size: inherit;
  line-height: 1.4;
}
/* =============================
   Manager UI
   ============================= */

.detail-attachments__toolbar {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  align-items: center;
}

.detail-attachments__toolbar-left {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

.detail-attachments__toolbar-right {
  margin-left: auto;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

/* =============================
   Manager Layout – TOP list + BOTTOM history
   ============================= */

/* Celý manager panel: sloupec, bez vlastního scrollu */
.detail-attachments__manager-layout {
  display: flex;
  flex-direction: column;
  gap: 12px;

  overflow: hidden; /* ✅ nesmí scrollovat celý panel */
  min-height: 0;

  /* ✅ aby flex dotlačil historii dolů */
  height: var(--attachments-manager-height, calc(100vh - 260px));
  max-height: var(--attachments-manager-height, calc(100vh - 260px));
}

/* Horní část (přílohy) – zabere zbytek */
.detail-attachments__list-scroll {
  flex: 1 1 auto;
  min-height: 0;
  overflow: hidden; /* ✅ nesmí scrollovat wrapper */
  display: flex;
  flex-direction: column;
}

/* Spodní panel (historie) – vždy dole */
.detail-attachments__history {
  flex: 0 0 auto;
  min-height: 0;
  overflow: hidden; /* ✅ nesmí scrollovat karta */
}

/* Body historie musí být flex kontejner, jinak se výšky “neroznesou” */
.detail-attachments__history-body {
  display: flex; /* ✅ klíčový fix */
  flex-direction: column;
  overflow: hidden;
  padding: 0;
  min-height: 0;
}

/* Společná “shell” obálka pro ListView */
.detail-attachments__lv-shell {
  display: flex;
  flex-direction: column;
  min-height: 0;
  overflow: hidden; /* ✅ shell nesmí scrollovat */
}

/* Shell pro hlavní list (přílohy) */
.detail-attachments__list-shell {
  flex: 1 1 auto;
  min-height: 0;
  height: 100%;
}

/* Shell pro historii (kompaktní) */
.detail-attachments__history-compact {
  display: flex; /* ✅ klíčové */
  flex-direction: column;
  min-height: 0;
  height: 100%; /* ✅ klíčové */
  --listview-max-height: 120px; /* výška scrollu v historii */
}

/* Drobné zhutnění tabulky v historii (volitelné, ale příjemné) */
.detail-attachments__history-compact .generic-type__cell,
.detail-attachments__history-compact .generic-type__table thead th {
  padding-top: 8px;
  padding-bottom: 8px;
}
/* =============================
   Mobile tuning
   ============================= */

@media (max-width: 720px) {
  .detail-attachments__manager-layout {
    height: var(--attachments-manager-height, calc(100vh - 230px));
    max-height: var(--attachments-manager-height, calc(100vh - 230px));
  }

  /* Horní seznam – trochu menší max-height (podle toho, co máš nad tím) */
  .detail-attachments__list-scroll .detail-attachments__lv-shell {
    --listview-max-height: calc(100vh - 380px);
  }

  .detail-attachments__history-compact {
    --listview-max-height: 110px;
  }
}
